.. _2_2:

RareLink-CDM
=============


In this section, we provide an overview of the instruments that are part of the
RareLink Common Data Model (CDM), which is based on the :ref:`1_5`. 
We have implemented the :ref:`1_5`'s definitions, codes, and mappings 
into the REDCap instruments by encoding the variables and value sets in the
REDCap data dictionary. Each section of the model corresponds to a distinct
instrument, ensuring consistency and comprehensive data capture.

.. hint:: 
    - Read the :ref:`1_6` page to understand how REDCap instruments & data dictionaries work.
    - Read the :ref:`1_5` page for more information on the Rare Disease Common Data Model.


Contents
----------

- :ref:`rarelink_cdm_datadictionary`
- :ref:`rarelink_cdm_linkml`
- :ref:`rule-set`
- :ref:`field-anotations`
- :ref:`cdm_overview`


_____________________________________________________________________________________

.. _rarelink_cdm_datadictionary:

REDCap Data Dictionary
-----------------------

The RareLink CDM Data Dictionary is available for download as a CSV file:

:download:`Download: RareLink-CDM Data Dictionary (v2.0.0) <../../res/rarelink_cdm_datadictionary - v2_0_0.csv>`

... Next steps
________________

- ... read :ref:`3_1` for more information on how to manually import and set up
  the RareLink-CDM Data Dictionary into your local REDCap project.
- ... or run the following commands to directly import the data dictionary into 
  your REDCap project using the :ref:`2_3`:

.. code-block:: bash

    rarelink setup keys
    rarelink setup data-dictionary

Return to `top <#top>`_.

_____________________________________________________________________________________

.. _rarelink_cdm_linkml:

LinkML Schema
---------------

The RareLink-CDM has been encoded in the LinkML schema format to allow for
interoperability with other data models and standards. The LinkML schema
is an open-data modeling language and provides a machine-readable representation
of the RareLink-CDM, including the data elements, codes, and mappings to other 
standards. In other words, the RareLink REDCap instruments are displayed in a
structured format that so that LinkML modules and functionalities can be used.


- Here you can view the `LinkML schema of the RareLink-CDM v2.0.0 <https://github.com/BIH-CEI/rarelink/tree/develop/src/rarelink_cdm/v2_0_0>`_. 

Usage 
_______

We use RareLink-CDM-LinkML schema and functionalities in various RareLink 
modules, for example:

- When running ``rarelink redcap export-records`` you will see, that the data 
  from the REDCap project is automatically processed to the LinkML presentation
  of the RareLink-CDM and validated against it. This ensures the data is ready 
  to :ref:`4_3`. 
- Within the data model itself, we use its `python classes and properties <https://github.com/BIH-CEI/rarelink/tree/develop/src/rarelink_cdm/v2_0_0/datamodel>`_ 
  automatically generated by LinkML schema to ensure consistent use of code 
  systems, versions and codes within one RareLink-CDM version and its mappings.
- Since our RareLink-CDM is modeled and defined with LinkML, we can make use 
  of the `LinkML Schema Automator <https://github.com/linkml/schema-automator>`_ 
  for :ref:`4_2` from existing (tabular) databases. This allows import it into
  a REDCap project and allows you to :ref:`4_3` or :ref:`4_4`. 

LinkML - further links
________________________

To know more about LinkML, check out:

- The `LinkML GitHub repository <https://github.com/linkml/linkml>`_  or
- the `LinkML Schema Documentation <https://linkml.io/linkml/schemas/>`_. 

Feel free to :ref:`12` us in case you would like to be connected to the LinkML 
community or our colleagues from the `Monarch Initiative <https://monarchinitiative.org/>`_.



Return to `top <#top>`_.


_____________________________________________________________________________________

.. _rule-set:

Rules for REDCap codes and codesystems
---------------------------------------

REDCap variables and choice codes have specific limitations and requirements:

- *REDCap* recommends a **maximum of 26 characters for variable names**. We have 
  shortened the variable names to adhere to this limitation.
- **REDCap variables** must be unique and must not contain spaces or special 
  characters, i.e. only alphanumeric characters and underscores.
- **REDCap choice codes** must be unique and must not contain spaces or special 
  characters, i.e. only alphanumeric characters and underscores.

To address these, we have defined a set of rules for the REDCap variables and
choice codes in the RareLink-CDM Data Dictionary. The rules are as follows:

1) The REDCap variable names are based on the :ref:`1_5` codes and display names.
2) The REDCap choices are based on the :ref:`1_5` codes and display names.
3) The REDCap variable names are shortened to adhere to the 26-character limit.
4) The REDCap variable names are unique and do not contain spaces or special characters.
5) The REDCap choice codes are unique and do not contain spaces or special characters.
6) All codes begin with the official codesystem prefix (e.g. HP, SNOMED, etc.) as a lower case string followed by an underscore and the code.
7) All codes are defined in the Field Annotations of each data element.

Return to `top <#top>`_.

_____________________________________________________________________________________

.. _field-anotations:

REDCap Field Annotations
-------------------------

Within the Field Annotation field of each REDCap element, we have defined each 
element's metadata according to the :ref:`1_5` standard, including the following:

- **Variable**: Corresponding to the data element code, codesystem, and display name.
- **Choices**: If applicable, the corresponding choices codesystem, and display name.
- **Version(s)**: If applicable, the corresponding codesystem versions used in the REDCap data element
- **Mapping**: If applicable, the corresponding mapping to the :ref:`1_4` or :ref:`1_3` standard.

Example Field Annotation of 6.2.6 Temporal Pattern:

.. code-block:: bash
  
    Variable: 
    HP:0012824 | Severity  
    Choices: 
    - HP:0012827 | Borderline  
    - HP:0012825 | Mild  
    - HP:0012826 | Moderate  
    - HP:0012829 | Profound  
    - HP:0012828 | Severe  
    Version(s): 
    - HPO Version 2024-08-13  
    Mapping: 
    - HL7 FHIR Expression v4.0.1: Observation.interpretation  
    - GA4GH Phenopacket Schema v2.0 Element: PhenotypicFeature.severity

Return to `top <#top>`_.

_____________________________________________________________________________________

.. _cdm_overview:

RareLink-CDM Instruments
-------------------------

The RareLink-CDM instruments translate the `ontology-based Rare Disease Common Data Model (RD-CDM) <https://rarelink.readthedocs.io/en/latest/1_background/1_5_rd_cdm.html>`_
into REDCap instruments. Slight adjustments to the RD-CDM were made to comply 
with REDCap's :ref:`rule_set`, the data dictionary requirements and to ensure
alignment with:

- international registries (e.g., the `European Reference Networks (ERNs) <https://health.ec.europa.eu/rare-diseases-and-european-reference-networks/european-reference-networks_en>`_),
- the `HL7 FHIR International Patient Summary (IPS) v2.0.0 <https://build.fhir.org/ig/HL7/fhir-ips/>`_,
- the `HL7 Genomics Reporting v3.0.0 Profiles <https://hl7.org/fhir/uv/genomics-reporting/STU3/general.html>`_,  and
- the `GA4GH Phenopacket Schema <https://rarelink.readthedocs.io/en/latest/1_background/1_3_ga4gh_phenopacket_schema.html>`_.

Each instrument corresponds to a specific section of the RD-CDM and its 
adpations are described in the section below for each section: 

- :ref:`formal-criteria`
- :ref:`personal-information`
- :ref:`patient-status`
- :ref:`care-pathway`
- :ref:`disease`
- :ref:`genetic-findings`
- :ref:`phenotypic-features`
- :ref:`measurements`
- :ref:`family-history`
- :ref:`consent`
- :ref:`disability`

Return to `Top <#top>`_.

.. tip:: 
  When capturing data manually in you REDCap project, we recommend using the Guide
  for :ref:`4_1`! The information below rather details the structure of the :ref:`1_5`
  within REDCap (i.e. therefore as the RareLink-CDM).

_____________________________________________________________________________________


Legend: Structure of the Schema below
______________________________________

Each instrument follows a consistent format for documentation and representation
of variables. Below is an explanation of the sections and terms used:

**Instrument Header**
""""""""""""""""""""""""""""""""

Each instrument begins with:

- **Title**: The name of the instrument and its corresponding REDCap identifier 
  in parentheses (e.g., ``rarelink_1_formal_criteria``).
- **Purpose**: A brief description of the instrument's objective.
- A box indicating whether the instrument is a **Single-Entry Form** (used once per individual):

+-----------------------+
| **Single-Entry Form** |
+-----------------------+ 

... or a **Repeating Form** (used multiple times per individual): 

+-------------------+
| **Repeated Form** |
+-------------------+

**Variables & Adjustments**
""""""""""""""""""""""""""""""""

Each variable is documented with the following attributes:

1. **Variable Name and Description**:

   - Listed with its sequence number and corresponding identifier 
     (e.g., 1.1 Pseudonym (``snomedct_422549004)``).
   - Includes a brief explanation of the variable's purpose, if necessary.

2. **Cardinality**:

   - Specifies whether the variable is **Required** or **Optional** and its occurrence:

     - ``1..1`` for exactly one occurrence, 
     - ``0..1`` for one optional occurence, or 
     - ``1..*`` / ``0..*`` for multiple required/optional occurences.

3. **Validation**:

   - Describes the expected format or encoding for the variable 
     (e.g., **Free Text**, **Dropdown (choices encoded according to** :ref:`1_5`), 
     or specific ontology references like ``BIOPORTAL:MONDO``).

.. note:: 

  All repeating forms are optional, therefore the cardinality is always ``0..*``.
  However, as soon as an instrument is used, specific elements may be required (``1..1``)
  to comply with specific HL7 FHIR or Phenopacket requirements.

_____________________________________________________________________________________

.. _formal-criteria:

(1) Formal Criteria (``rarelink_1_formal_criteria``)
______________________________________________________

**Purpose**: Captures eligibility and registration information for individuals.

+-----------------------+
| **Single-Entry Form** |
+-----------------------+ 

**Variables & Adjustments**:

- 1.1 Pseudonym (``snomedct_422549004``)

  - Cardinality: Required (1..1)
  - Validation: Free Text

- 1.2 Date of Admission (``snomedct_399423000``)

  - Cardinality: Required (1..1)
  - Validation: Date format (YYYY-MM-DD)

Return to `Instruments Overview <cdm-instruments-overview>`_.
Return to `top <#top>`_.

_____________________________________________________________________________________

.. _personal-information:

(2) Personal Information (``rarelink_2_personal_information``)
______________________________________________________________

**Purpose**: Captures demographic and personal details of individuals.

+-----------------------+
| **Single-Entry Form** |
+-----------------------+ 

**Variables & Adjustments**:

- 2.1 Date of Birth (``snomedct_184099003``)

  - Cardinality: Required (1..1)
  - Validation: Date format (YYYY-MM-DD)

- 2.2 Sex at Birth (``snomedct_281053000``)

  - Cardinality: Optional
  - Validation: Dropdown (choices encoded according to :ref:`1_5`)

- 2.3 Karyotypic Sex (``snomedct_1296886006``)

  - Cardinality: Optional
  - Validation: Dropdown (choices encoded according to :ref:`1_5`)

- 2.4 Gender Identity (``snomedct_263495000``)

  - Cardinality: Optional
  - Validation: Dropdown (choices encoded according to :ref:`1_5`)

- 2.5 Country of Birth (``snomedct_370159000``)

  - Cardinality: Optional
  - Validation: Free Text

Return to `Instruments Overview <cdm-instruments-overview>`_.
Return to `top <#top>`_.

_____________________________________________________________________________________

.. _patient-status:

(3) Patient Status (``rarelink_3_patient_status``)
____________________________________________________

**Purpose**: Tracks changes in patient conditions over time.

+-------------------+
| **Repeated Form** |
+-------------------+

**Variables & Adjustments**:

- Date of Completion for the Sheet (``patient_status_date``)

  - Novel Variable: Date of completion for the sheet
  - Cardinality: Required (1..1)
  - Validation: Date format (YYYY-MM-DD)

- 3.1 Vital Status (``snomedct_278844005``)

  - Cardinality: Optional
  - Validation: Dropdown (choices encoded according to ref:`1_5`)

- 3.2 Time of Death (``snomedct_398299004``)

  - Cardinality: Optional
  - Validation: Date format (YYYY-MM-DD)

- 3.3 Cause of Death [ICD10CM] (``snomedct_184305005``)

  - Cardinality: Optional
  - Validation: `BIOPORTAL:ICD10CM`

- 3.4 Age Category (``snomedct_105727008``)

  - Cardinality: Optional
  - Validation: Dropdown (choices encoded according to ref:`1_5`)

- 3.5 Length of Gestation at Birth [weeks+days] (``snomedct_412726003``)

  - Cardinality: Optional
  - Validation: Free Text

- 3.6 Undiagnosed RD Case (``snomedct_723663001``)

  - Cardinality: Optional
  - Validation: Dropdown (choices encoded according to ref:`1_5`)


Return to `Instruments Overview <cdm-instruments-overview>`_.
Return to `top <#top>`_.

_____________________________________________________________________________________

.. _care-pathway:

(4) Care Pathway (``rarelink_4_care_pathway``)
____________________________________________________

**Purpose**: Tracks details of individual encounters in the care pathway.

+-------------------+
| **Repeated Form** |
+-------------------+

**Variables & Adjustments**:

- 4.1 Encounter Start (``hl7fhir_enc_period_start``)

  - Cardinality: Optional
  - Validation: Date format (YYYY-MM-DD)

- 4.2 Encounter End (``hl7fhir_enc_period_end``)

  - Cardinality: Optional
  - Validation: Date format (YYYY-MM-DD)

- 4.3 Encounter Status (``snomedct_305058001``)

  - Cardinality: Required (1..1)
  - Validation: Dropdown (choices encoded according to ref:`1_5`)

- 4.4 Encounter Class (``hl7fhir_encounter_class``)

  - Cardinality: Required (1..1)
  - Validation: Dropdown (choices encoded according to ref:`1_5`)


Return to `Instruments Overview <cdm-instruments-overview>`_.
Return to `top <#top>`_.

_____________________________________________________________________________________

.. _disease:

(5) Disease (``rarelink_5_disease``)
____________________________________________________

**Purpose**: Captures detailed information about the diseases affecting 
individuals.

+-------------------+
| **Repeated Form** |
+-------------------+

**Variables & Adjustments**:

- Disease Coding (``disease_coding``)

  - Novel Variable: Selection of code system for disease information (only one 
    code system allowed per disease entry. We recommend using MONDO).
  - Cardinality: Required (1..1)
  - Validation: Dropdown (choices encoded according to ref:`1_5`)

**Disease Information (Grouped Fields)**:

The following fields capture the disease information using different encoding systems. The relevant field depends on the choice made in ``disease_coding``:

- 5.1 Disease [MONDO] (``snomedct_64572001_mondo``)

  - Cardinality: Required (1..1) if ``disease_coding`` = 'mondo'
  - Validation: `BIOPORTAL:MONDO`

- 5.1 Disease [ORDO] (``snomedct_64572001_ordo``)

  - Cardinality: Required (1..1) if ``disease_coding`` = 'ordo'
  - Validation: `BIOPORTAL:ORDO`

- 5.1 Disease [ICD10CM] (``snomedct_64572001_icd10cm``)

  - Cardinality: Required (1..1) if ``disease_coding`` = 'icd10cm'
  - Validation: `BIOPORTAL:ICD10CM`

- 5.1 Disease [ICD11] (``snomedct_64572001_icd11``)

  - Cardinality: Required (1..1) if ``disease_coding`` = 'icd11'
  - Validation: Free Text (`BIOPORTAL does not support ICD11 yet`)

- 5.1 Disease [OMIM_P] (``snomedct_64572001_omim_p``)

  - Cardinality: Required (1..1) if ``disease_coding`` = 'omim'
  - Validation: `BIOPORTAL:OMIM`

**Additional Fields**:

- 5.2 Verification Status (``loinc_99498_8``)

  - Cardinality: Optional
  - Validation: Dropdown (choices encoded according to ref:`1_5`)

- 5.3 Age at Onset (``snomedct_424850005``)

  - Cardinality: Optional
  - Validation: Dropdown (choices encoded according to ref:`1_5`)

- 5.4 Date of Onset (``snomedct_298059007``)

  - Cardinality: Optional
  - Validation: Date format (YYYY-MM-DD)

- 5.5 Age at Diagnosis (``snomedct_423493009``)

  - Cardinality: Optional
  - Validation: Dropdown (choices encoded according to ref:`1_5`)

- 5.6 Date of Diagnosis (``snomedct_432213005``)

  - Cardinality: Optional
  - Validation: Date format (YYYY-MM-DD)

- 5.7 Body Site [SNOMED CT] (``snomedct_363698007``)

  - Cardinality: Optional
  - Validation: `BIOPORTAL:SNOMEDCT`

- 5.8 Clinical Status (``snomedct_263493007``)

  - Cardinality: Optional
  - Validation: Dropdown (choices encoded according to ref:`1_5`)

- 5.9 Disease Severity (``snomedct_246112005``)

  - Cardinality: Optional
  - Validation: Dropdown (choices encoded according to ref:`1_5`)


Return to `Instruments Overview <cdm-instruments-overview>`_.
Return to `top <#top>`_.

_____________________________________________________________________________________

.. _genetic-findings:

(6.1) Genetic Findings (``rarelink_6_1_genetic_findings``)
____________________________________________________

**Purpose**: Captures information about genetic variants and their clinical significance.

+-------------------+
| **Repeated Form** |
+-------------------+

**Variables & Adjustments**:

- Genetic Diagnosis Code (``genetic_diagnosis_code``)

  - Novel Variable: Allows the user to choose the corresponding code system for 
    a genetic diagnosis related to the variant.
  - Cardinality: Required (1..1)
  - Validation: Dropdown (choices encoded according to ref:`1_5`)

**Genomic Diagnosis (Grouped Fields)**:

The following fields capture the genomic diagnosis using different code systems.
The relevant field depends on the choice made in ``genetic_diagnosis_code``:

- 6.1.1 Genomic Diagnosis [MONDO] (``snomedct_106221001_mondo``)

  - Cardinality: Required (1..1) if ``genetic_diagnosis_code`` = 'mondo'
  - Validation: `BIOPORTAL:MONDO`

- 6.1.1 Genomic Diagnosis [OMIM_p] (``snomedct_106221001_omim_p``)

  - Cardinality: Required (1..1) if ``genetic_diagnosis_code`` = 'omim'
  - Validation: `BIOPORTAL:OMIM`

**Variant Information**:

- 6.1.2 Progress Status of Interpretation (``ga4gh_progress_status``)

  - Cardinality: Optional
  - Validation: Dropdown (choices encoded according to ref:`1_5`)

- 6.1.3 Interpretation Status (``ga4gh_interp_status``)

  - Cardinality: Optional
  - Validation: Dropdown (choices encoded according to ref:`1_5`)

- 6.1.4 Structural Variant Analysis Method (``loinc_81304_8``)

  - Cardinality: Optional
  - Validation: Dropdown (choices encoded according to ref:`1_5`)

- 6.1.5 Reference Genome (``loinc_62374_4``)

  - Cardinality: Optional
  - Validation: Dropdown (choices encoded according to ref:`1_5`)

- 6.1.6 Genetic Mutation String (``loinc_lp7824_8``)

  - Cardinality: Optional
  - Validation: Free Text

**HGVS Variant Information**:

- Variant Expression (``variant_expression``)

  - Novel Variable: Ensures users select the type of validated HGVS expression.
  - Cardinality: Required (1..1)
  - Validation: Dropdown (choices: g.HGVS, c.HGVS, p.HGVS)

- 6.1.7 Genomic DNA Change [g.HGVS] (``loinc_81290_9``)

  - Cardinality: Required (1..1) if ``variant_expression`` = 'ghgvs'
  - Validation: Free Text

- 6.1.8 Sequence DNA Change [c.HGVS] (``loinc_48004_6``)

  - Cardinality: Required (1..1) if ``variant_expression`` = 'chgvs'
  - Validation: Free Text

- 6.1.9 Amino Acid Change [p.HGVS] (``loinc_48005_3``)

  - Cardinality: Required (1..1) if ``variant_expression`` = 'phgvs'
  - Validation: Free Text

- Variant Validation (``variant_validation``)

  - Novel Variable: Ensures users confirm that HGVS expressions were validated using the variant validator.
  - Cardinality: Required if any HGVS field is filled.
  - Validation: Radio (Yes/No)

**Variant Information**:

- 6.1.10 Gene [HGNC-NR] (``loinc_48018_6``)

  - Cardinality: Optional
  - Validation: `BIOPORTAL:HGNC-NR`

- 6.1.11 Zygosity (``loinc_53034_5``)

  - Cardinality: Optional
  - Validation: Dropdown (choices encoded according to ref:`1_5`)

- 6.1.11A Zygosity - Other [LOINC] (``loinc_53034_5_other``)

  - Cardinality: Required (1..1) if ``loinc_53034_5`` = 'Other'
  - Validation: `BIOPORTAL:LOINC`

- 6.1.12 Genomic Source Class (``loinc_48002_0``)

  - Cardinality: Optional
  - Validation: Dropdown (choices encoded according to ref:`1_5`)

- 6.1.13 DNA Change Type (``loinc_48019_4``)

  - Cardinality: Optional
  - Validation: Dropdown (choices encoded according to ref:`1_5`)

- 6.1.13A DNA Change Type - Other [LOINC] (``loinc_48019_4_other``)

  - Cardinality: Required (1..1) if ``loinc_48019_4`` = 'Other'
  - Validation: `BIOPORTAL:LOINC`

- 6.1.14 Clinical Significance [ACMG] (``loinc_53037_8``)

  - Cardinality: Optional
  - Validation: Dropdown (choices encoded according to ref:`1_5`)

- 6.1.15 Therapeutic Actionability (``ga4gh_therap_action``)

  - Cardinality: Optional
  - Validation: Dropdown (choices encoded according to ref:`1_5`)

- 6.1.16 Clinical Annotation Level Of Evidence (``loinc_93044_6``)

  - Cardinality: Optional
  - Validation: Dropdown (choices encoded according to ref:`1_5`)


Return to `Instruments Overview <cdm-instruments-overview>`_.
Return to `top <#top>`_.

_____________________________________________________________________________________

.. _phenotypic-features:

(6.2) Phenotypic Feature (``rarelink_6_2_phenotypic_feature``)
______________________________________________________________

**Purpose**: Captures observed physical and clinical characteristics using 
standardized terminologies.

+-------------------+
| **Repeated Form** |
+-------------------+

**Variables & Adjustments**:

- 6.2.1 Phenotypic Feature (``snomedct_8116006``)

  - Cardinality: Required (1..1)
  - Validation: `BIOPORTAL:HP`

- 6.2.2 Status (``snomedct_363778006``)

  - Cardinality: Required (1..1)
  - Validation: Dropdown (choices encoded according to ref:`1_5`)

- 6.2.3 Determination Date (``snomedct_8116006_onset``)

  - Cardinality: Optional
  - Validation: Date format (YYYY-MM-DD)

- 6.2.4 Resolution Date (``snomedct_8116006_resolut``)

  - Cardinality: Optional
  - Validation: Date format (YYYY-MM-DD)

- 6.2.5 Age of Onset (``hp_0003674``)

  - Cardinality: Optional
  - Validation: Dropdown (choices encoded according to ref:`1_5`)

- 6.2.6 Temporal Pattern (``hp_0011008``)

  - Cardinality: Optional
  - Validation: Dropdown (choices encoded according to ref:`1_5`)

- 6.2.7 Phenotype Severity (``hp_0012824``)

  - Cardinality: Optional
  - Validation: Dropdown (choices encoded according to ref:`1_5`)

- 6.2.9 Evidence for the phenotype [ECO] (``phenotypicfeature_evidence``)

  - Cardinality: Optional
  - Validation: `BIOPORTAL:ECO`

**Clinical Modifiers adjustments**:

The following fields capture clinical modifiers for a specific phenotypic 
feature that were defined within the RareLink-CDM - based on the general 
corresponding :ref:`1_5` field: 

- 6.2.8A Clinical Modifier [HP] (``hp_0012823_hp1``)

  - Cardinality: Optional
  - Validation: `BIOPORTAL:HP`

- 6.2.8B Clinical Modifier [HP] (``hp_0012823_hp2``)

  - Cardinality: Optional (Required if ``hp_0012823_hp1`` is filled)
  - Validation: `BIOPORTAL:HP`

- 6.2.8C Clinical Modifier [HP] (``hp_0012823_hp3``)

  - Cardinality: Optional (Required if ``hp_0012823_hp2`` is filled)
  - Validation: `BIOPORTAL:HP`

- 6.2.8D If applicable, what was the causing organism? [NCBITAXON] 
  (``hp_0012823_ncbitaxon``)

  - Cardinality: Optional
  - Validation: `BIOPORTAL:NCBITAXON`

- 6.2.8E If applicable, what was the primary body site? [SNOMED] 
  (``hp_0012823_snomed``)

  - Cardinality: Optional
  - Validation: `BIOPORTAL:SNOMEDCT`
  
Return to `Instruments Overview <cdm-instruments-overview>`_.
Return to `top <#top>`_.

_____________________________________________________________________________________


.. _measurements:

(6.3) Measurements (``rarelink_6_3_measurements``)
____________________________________________________

**Purpose**: Captures various types of measurements including vital signs, laboratory tests, imaging, procedures, and more, aligned with IPS and Phenopackets profiles.

+-------------------+
| **Repeated Form** |
+-------------------+

**Key Adjustments**:

1. **Vital Signs Panel**: Added ``6.3.1A Vital Signs Panel`` and 
   ``6.3.1A Other Vital Sign`` to align with the IPS vital status profile.
2. **Procedure-Specific Fields**: Integrated ``Procedure as NCIT or SNOMED?`` 
   and related fields for ``NCIT`` and ``SNOMED`` procedures to support IPS 
   procedure profiles.
3. **Complex Logic**: Highlighted branching logic based on 
   ``measurement_category`` to handle vital signs, laboratory, imaging, 
   procedures, and other measurement types.

**Variables & Adjustments**:

- 6.3.0A Category (``measurement_category``)

  - Cardinality: Required (1..1)
  - Validation: Dropdown (choices encoded according to ref:`1_5`)

- 6.3.0B Status (``measurement_status``)

  - Cardinality: Required (1..1)
  - Validation: Dropdown (choices encoded according to ref:`1_5`)

**Vital Signs**:

- 6.3.1A Vital Signs Panel (``ln_85353_1``)

  - Cardinality: Optional (if ``measurement_category`` = "vital-signs")
  - Validation: Dropdown (choices encoded according to ref:`1_5`)

- 6.3.1A Other Vital Sign (``ln_85353_1_other``)

  - Cardinality: Optional (Required if ``ln_85353_1`` = "other")
  - Validation: `BIOPORTAL:LOINC`

**Measurement Details**:

- 6.3.1 Assay (``ncit_c60819``)

  - Cardinality: Optional (if ``measurement_category`` ≠ "vital-signs" and ≠ "procedure")
  - Validation: `BIOPORTAL:LOINC`

- 6.3.2 Value (``ncit_c25712``)

  - Cardinality: Optional (if ``measurement_category`` ≠ "procedure")
  - Validation: Decimal number (e.g., 0.00–999999.99)

- 6.3.3 Value Unit (``ncit_c92571``)

  - Cardinality: Optional (if ``measurement_category`` ≠ "vital-signs" or ``ln_85353_1_other`` is filled, and ≠ "procedure")
  - Validation: `BIOPORTAL:UO`

- 6.3.4 Interpretation (``ncit_c41255``)

  - Cardinality: Optional (if ``measurement_category`` ≠ "procedure")
  - Validation: `BIOPORTAL:NCIT`

- 6.3.5 Time Observed (``ncit_c82577``)

  - Cardinality: Required (1..1)
  - Validation: Date format (YYYY-MM-DD)

**Procedure-Specific Fields**:

- Procedure as NCIT or SNOMED? (``procedure``)

  - Cardinality: Optional (if ``measurement_category`` = "procedure")
  - Validation: Dropdown (choices encoded according to ref:`1_5`)

- 6.3.6A Procedure [NCIT] (``snomedct_122869004_ncit``)

  - Cardinality: Optional (if ``procedure`` = "ncit")
  - Validation: `BIOPORTAL:NCIT`

- 6.3.6B Procedure [SNOMED] (``snomedct_122869004_snomed``)

  - Cardinality: Optional (if ``procedure`` = "snomed")
  - Validation: `BIOPORTAL:SNOMEDCT`

- 6.3.7 Procedure [SNOMED] (``snomedct_122869004``)

  - Cardinality: Required (1..1, if ``measurement_category`` = "procedure")
  - Validation: `BIOPORTAL:SNOMEDCT`

- 6.3.7A Body Site [SNOMED] (``snomedct_122869004_bdsite``)

  - Cardinality: Optional (if ``measurement_category`` = "procedure")
  - Validation: `BIOPORTAL:SNOMEDCT`

- 6.3.7B Procedure Status [SNOMED] (``snomedct_122869004_status``)

  - Cardinality: Required (1..1, if ``measurement_category`` = "procedure")
  - Validation: Dropdown (choices encoded according to ref:`1_5`)


Return to `Instruments Overview <cdm-instruments-overview>`_.
Return to `top <#top>`_.

_____________________________________________________________________________________


.. _family-history:

(6.4) Family History (``rarelink_6_4_family_history``)
____________________________________________________

**Purpose**: Captures family history details of the individual, including 
relationships, health statuses, and genetic information.

+-------------------+
| **Repeated Form** |
+-------------------+

**Key Adjustments**:

1. **Pseudonym Field**: Added ``family_history_pseudonym`` to identify family 
   members across records.
2. **Required Fields**: Marked fields like ``family_history_pseudonym``, 
   ``snomedct_444018008``, and ``hl7fhir_fmh_status`` as mandatory for FHIR 
   base resource FamilyMemberHistory compatibility.
3. **Branching Logic**: Added logic for deceased family members to ensure fields
   like ``loinc_54112_8`` and ``loinc_92662_6`` are completed if applicable.


**Variables & Adjustments**:

- 6.4.0 Pseudonym (``family_history_pseudonym``)

  - Cardinality: Required (1..1)
  - Validation: Free Text

- 6.4.1 Propositus/-a (``snomedct_64245008``)

  - Cardinality: Optional
  - Validation: Dropdown (choices encoded according to ref:`1_5`)

- 6.4.2 Relationship to Index Case (``snomedct_408732007``)

  - Cardinality: Optional
  - Validation: Dropdown (choices encoded according to ref:`1_5`)

- 6.4.3 Consanguinity (``snomedct_842009``)

  - Cardinality: Optional
  - Validation: Dropdown (choices encoded according to ref:`1_5`)

- 6.4.4 Family Member Relationship (``snomedct_444018008``)

  - Cardinality: Required (1..1)
  - Validation: Dropdown (choices encoded according to ref:`1_5`)

- 6.4.5 Family Member Record Status (``hl7fhir_fmh_status``)

  - Cardinality: Required (1..1)
  - Validation: Dropdown (choices encoded according to ref:`1_5`)

- 6.4.6 Family Member Sex (``loinc_54123_5``)

  - Cardinality: Optional
  - Validation: Dropdown (choices encoded according to ref:`1_5`)

- 6.4.7 Family Member Age (``loinc_54141_7``)

  - Cardinality: Optional
  - Validation: Integer (0–200)

- 6.4.8 Family Member Date of Birth (``loinc_54124_3``)

  - Cardinality: Optional
  - Validation: Date format (YYYY-MM-DD)

- 6.4.9 Family Member Deceased (``snomedct_740604001``)

  - Cardinality: Optional
  - Validation: Dropdown (choices encoded according to ref:`1_5`)

- 6.4.10 Family Member Cause of Death [ICD10CM] (``loinc_54112_8``)

  - Cardinality: Optional (available if ``snomedct_740604001`` = "snomedct_373066001")
  - Validation: `BIOPORTAL:ICD10CM`

- 6.4.11 Family Member Deceased Age (``loinc_92662_6``)

  - Cardinality: Optional (available if ``snomedct_740604001`` = "snomedct_373066001")
  - Validation: Integer (0–200)

- 6.4.12 Family Member Disease [MONDO] (``loinc_75315_2``)

  - Cardinality: Optional
  - Validation: `BIOPORTAL:MONDO`


Return to `Instruments Overview <cdm-instruments-overview>`_.
Return to `top <#top>`_.

_____________________________________________________________________________________

.. _consent:
(7) Consent (``rarelink_7_consent``)
____________________________________

**Purpose**: Captures the status and scope of consent provided by the patient 
for research, data reuse, and other purposes.

+-----------------------+
| **Single-Entry Form** |
+-----------------------+ 

**Key Adjustments**:

1. **Required Fields**: Fields like ``snomedct_309370004``, 
   ``snomedct_386318002``, ``rarelink_consent_contact``, and 
   ``rarelink_consent_data`` are mandatory to align with consent management 
   requirements.
2. **Biobank Information**: Added fields for biological samples and biobank 
   links to support research-focused data capture.
3. **Dropdown Logic**: Defined consistent encoding for dropdown fields to 
   ensure proper selection for consent-related decisions.

**Variables & Adjustments**:

- 7.1 Consent Status (``snomedct_309370004``)

  - Cardinality: Required (1..1)
  - Validation: Dropdown (choices encoded according to ref:`1_5`)

- 7.2 Consent Date (``hl7fhir_consent_datetime``)

  - Cardinality: Optional
  - Validation: Date format (YYYY-MM-DD)

- 7.3 Health Policy Monitoring (``snomedct_386318002``)

  - Cardinality: Required (1..1)
  - Validation: Free Text

- 7.4 Agreement to be Contacted for Research Purposes (``rarelink_consent_contact``)

  - Cardinality: Required (1..1)
  - Validation: Dropdown (choices encoded according to ref:`1_5`)

- 7.5 Consent to the Reuse of Data (``rarelink_consent_data``)

  - Cardinality: Required (1..1)
  - Validation: Dropdown (choices encoded according to ref:`1_5`)

- 7.6 Biological Sample (``snomedct_123038009``)

  - Cardinality: Optional
  - Validation: Dropdown (choices encoded according to ref:`1_5`)

- 7.7 Link to a Biobank (``rarelink_biobank_link``)

  - Cardinality: Optional
  - Validation: Free Text

Return to `Instruments Overview <cdm-instruments-overview>`_.
Return to `top <#top>`_.

_____________________________________________________________________________________

.. _disability:

(8) Disability (``rarelink_8_disability``)
__________________________________________

**Purpose**: Captures information related to the classification of an individual's functioning and disability.

+-----------------------+
| **Single-Entry Form** |
+-----------------------+ 

**Key Adjustments**:

1. **ICF Integration**: The variable ``rarelink_icf_score`` allows for the 
   classification of functioning and disability using the International 
   Classification of Functioning, Disability, and Health (ICF) framework.
2. **Documentation Support**: Links to relevant documentation and guidance 
   provided to ensure proper data entry and standardization.
3. **Optional Field**: The field is optional, catering to cases where detailed 
   disability classification is not required.

**Variables & Adjustments**:

- 8.1 Classification of Functioning / Disability (``rarelink_icf_score``)

  - Cardinality: Optional
  - Validation: Free Text (encoded according to `BIOPORTAL:ICF`)

Return to `Instruments Overview <cdm-instruments-overview>`_.
Return to `top <#top>`_.