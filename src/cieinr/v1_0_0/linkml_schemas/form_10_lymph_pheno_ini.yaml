id: https://github.com/BIH-CEI/cieinr/src/cieinr/v1_0_0/limkml_schemas/form_lymphopheno_initial.yaml
name: lymphocytes_phenotype
description: >
  Initial lymphocyte phenotype form capturing test timing and immune cell measurements 
  (T cells, B cells, and Natural Killer cells) for Phenopackets export.
prefixes:
  linkml: https://w3id.org/linkml/
  cieinr: https://github.com/BIH-CEI/cieinr
  NCIT: http://purl.obolibrary.org/obo/NCIT_
  LOINC: http://loinc.org/
imports:
  - linkml:types
  - cieinr_types
  - cieinr_code_systems
default_range: string
default_prefix: cieinr

classes:
  LymphocytesPhenotype:
    description: >
      Initial lymphocyte phenotype form capturing test timing and measurements of 
      CD3+ T cells, CD3+CD4+ T cells, CD3+CD8+ T cells, CD19+ B cells, CD20+ B cells, 
      and CD3-CD16+CD56+ Natural Killer cells.
    slots:
      - lympheno_test
      - lympheno_test_date
      - lympheno_loinc_8122_4_int
      - lympheno_loinc_8122_4_unito
      - lympheno_loinc_24467_3_int
      - lympheno_loinc_24467_3_val
      - lympheno_loinc_14135_8_int
      - lympheno_loinc_14135_8_val
      - lympheno_loinc_8116_6_int
      - lympheno_loinc_8116_6_val
      - lympheno_loinc_9558_8_int
      - lympheno_loinc_9558_8_val
      - lympheno_loinc_9728_7_int
      - lympheno_loinc_9728_7_val
      - lymphopheno_other
      - lymphopheno_test

slots:
  lympheno_test:
    title: Lymphocyte Phenotype Test Timing
    description: >
      Please provide the following information at each designated time point. 
      Click on the time point you are reporting.
    range: LymphenoTestEnum
    required: false

  lympheno_test_date:
    title: Lymphocyte Phenotype Test Date
    description: >
      Date of the Lymphocyte phenotype test (format: 01-M-Y).
    range: date_dmy
    required: false

  lympheno_loinc_8122_4_int:
    title: CD3+ T cells interpretation
    description: Interpretation of CD3+ T cells.
    range: LabInterpretationEnum
    required: false

  lympheno_loinc_8122_4_unito:
    title: CD3+ T Cells x10^9/l
    description: Measurement of CD3+ T cells.
    range: string
    required: false

  lympheno_loinc_24467_3_int:
    title: CD3+CD4+ T cells interpretation
    description: Interpretation of CD3+CD4+ T cells.
    range: LabInterpretationEnum
    required: false

  lympheno_loinc_24467_3_val:
    title: CD3+CD4+ T cells x10^9/l
    description: Value for CD3+CD4+ T cells.
    range: decimal
    required: false

  lympheno_loinc_14135_8_int:
    title: CD3+CD8+ T cells interpretation
    description: Interpretation of CD3+CD8+ T cells.
    range: LabInterpretationEnum
    required: false

  lympheno_loinc_14135_8_val:
    title: CD3+CD8+ T cells x10^9/l
    description: Value for CD3+CD8+ T cells.
    range: decimal
    required: false

  lympheno_loinc_8116_6_int:
    title: CD19+ B cells interpretation
    description: Interpretation of CD19+ B cells.
    range: LabInterpretationEnum
    required: false

  lympheno_loinc_8116_6_val:
    title: CD19+ B cells x10^9/l
    description: Value for CD19+ B cells.
    range: decimal
    required: false

  lympheno_loinc_9558_8_int:
    title: CD20+ B cells interpretation
    description: Interpretation of CD20+ B cells.
    range: LabInterpretationEnum
    required: false

  lympheno_loinc_9558_8_val:
    title: CD20+ B cells x10^9/l
    description: Value for CD20+ B cells.
    range: decimal
    required: false

  lympheno_loinc_9728_7_int:
    title: Natural Killer cells interpretation
    description: Interpretation of CD3-CD16+CD56+ Natural Killer cells.
    range: LabInterpretationEnum
    required: false

  lympheno_loinc_9728_7_val:
    title: Natural Killer cells x10^9/l
    description: Value for CD3-CD16+CD56+ Natural Killer cells.
    range: decimal
    required: false

  lymphopheno_other:
    title: Other lymphocyte phenotype
    description: >
      If other subsets were tested, type in data or upload a de-identified report and add comments.
    range: notes
    required: false

  lymphopheno_test:
    title: Lymphocyte phenotype test file
    description: >
      Please upload the PDF results of the test. Remove patientâ€™s personal information.
    range: file
    required: false

enums:
  LymphenoTestEnum:
    description: Options for test timing.
    permissible_values:
      "1":
        description: Before the time of diagnosis of IEI and initiation of any treatment, if available
      "2":
        description: Most recent test

  LabInterpretationEnum:
    description: Interpretation of lab values.
    permissible_values:
      ncit_c78801:
        description: Below age-related reference range
        meaning: NCIT:C78801
      ncit_c78800:
        description: Within age-related reference range
        meaning: NCIT:C78800
      ncit_c78727:
        description: Above age-related reference range
        meaning: NCIT:C78727
      "1":
        description: not done
